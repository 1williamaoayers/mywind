# 20 ä¸ªå¤±è´¥ä¿¡æ¯æºä¿®å¤å»ºè®®ä¹¦

**æ—¶é—´**: 2025-12-30  
**æ–¹æ³•**: åŸºäº CSS é€‰æ‹©å™¨è‡ªåŠ¨ä¿®å¤æ–¹æ³• + DOM å®é™…è°ƒç ”

---

## ä¸€ã€é—®é¢˜åˆ†ç±»

| é—®é¢˜ç±»å‹ | æ•°é‡ | æº |
|----------|------|-----|
| **é€‰æ‹©å™¨è¿‡æœŸ** | 8 | ä¸œæ–¹è´¢å¯Œã€æ ¼éš†æ±‡ã€å¯Œé€”ã€æ¸¯äº¤æ‰€ã€ç ”æŠ¥å®¢ã€ç•Œé¢ã€å‘ç°æŠ¥å‘Šã€é›†å¾®ç½‘ |
| **åçˆ¬/éªŒè¯ç ** | 5 | åŒèŠ±é¡ºã€æ™ºé€šè´¢ç»ã€å¾®ä¿¡æœç´¢ã€SeekingAlphaã€è…¾è®¯è´¢ç» |
| **åŠ¨æ€åŠ è½½** | 4 | åå°”è¡—è§é—»ã€é‡‘åæ•°æ®ã€è´¢è”ç¤¾ã€HKEJ |
| **ç½‘ç»œé—®é¢˜** | 2 | æ¯ç»æ–°é—»ï¼ˆé‡å®šå‘å¾ªç¯ï¼‰ã€HKET |
| **å¸‚åœºä¸åŒ¹é…** | 3 | æ·˜è‚¡å§ã€å·¨æ½®èµ„è®¯ã€ä¸œè´¢è‚¡å§ï¼ˆä»…Aè‚¡ï¼‰|

---

## äºŒã€é€æºä¿®å¤æ–¹æ¡ˆ

### ç¬¬1ç±»ï¼šé€‰æ‹©å™¨è¿‡æœŸï¼ˆ8ä¸ªï¼‰

#### 1. ä¸œæ–¹è´¢å¯Œ eastmoney

**è°ƒç ”ç»“æœ**:
```
å‘ç°é€‰æ‹©å™¨: .news_item, .news_item_t, .news_item_url
ç¤ºä¾‹æ–°é—»: äº¬ä¸œ"ç‰µæ‰‹"åä¸ºï¼
```

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// å½“å‰ï¼ˆå¤±æ•ˆï¼‰
page.$$eval('.search-result a', ...)

// ä¿®å¤ä¸º
page.$$eval('.news_item a, .news_item_t a', els => 
    els.map(el => ({
        title: el.textContent?.trim(),
        url: el.href
    }))
)
```

---

#### 2. æ ¼éš†æ±‡ gelonghui

**é—®é¢˜**: æœç´¢é¡µåŠ¨æ€æ¸²æŸ“ï¼Œé€‰æ‹©å™¨å¤±æ•ˆ

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// æ·»åŠ ç­‰å¾…
await page.waitForSelector('[class*="search-result"]', { timeout: 10000 });

// ä½¿ç”¨é€šç”¨é€‰æ‹©å™¨
page.$$eval('[class*="article"] a, [class*="result"] a', ...)
```

---

#### 3. å¯Œé€” futu

**é—®é¢˜**: è‚¡ç¥¨è¯¦æƒ…é¡µç»“æ„æ”¹ç‰ˆ

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// ä½¿ç”¨å¯Œé€”æ–°é—»APIæ›¿ä»£é¡µé¢æŠ“å–
const url = `https://news.futunn.com/main/info/stock-news?stock_id=09618&market=1`;

// æˆ–ä½¿ç”¨æ–°é€‰æ‹©å™¨
page.$$eval('[data-testid="news-item"] a, .news-card a', ...)
```

---

#### 4. æ¸¯äº¤æ‰€ hkex

**é—®é¢˜**: å…¬å‘Šé¡µé¢éœ€è¦ç‰¹æ®Šå¤„ç†

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// ä½¿ç”¨æŠ«éœ²æ˜“API
const url = `https://www1.hkexnews.hk/search/titlesearch.xhtml?lang=ZH&stockcode=${code}`;

// ç­‰å¾…AjaxåŠ è½½
await page.waitForFunction(() => document.querySelectorAll('table tr').length > 2);
```

---

#### 5-8. ç ”æŠ¥å®¢/ç•Œé¢æ–°é—»/å‘ç°æŠ¥å‘Š/é›†å¾®ç½‘

**é€šç”¨é—®é¢˜**: æœç´¢ç»“æœå¼‚æ­¥åŠ è½½

**é€šç”¨ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// æ·»åŠ æ˜¾å¼ç­‰å¾…
await page.waitForFunction(() => {
    const items = document.querySelectorAll('[class*="item"], [class*="result"], [class*="card"]');
    return items.length > 0;
}, { timeout: 15000 });

// ä½¿ç”¨å®½æ³›é€‰æ‹©å™¨
page.$$eval('[class*="item"] a, [class*="result"] a, [class*="card"] a', ...)
```

---

### ç¬¬2ç±»ï¼šåçˆ¬/éªŒè¯ç ï¼ˆ5ä¸ªï¼‰

#### 9. åŒèŠ±é¡º ths

**é—®é¢˜**: éœ€è¦éªŒè¯ç 

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// æ–¹æ¡ˆAï¼šä½¿ç”¨åŒèŠ±é¡ºAPI
const url = `https://stockpage.10jqka.com.cn/HK${code}/news/`;

// æ–¹æ¡ˆBï¼šæ·»åŠ stealthæ’ä»¶
const StealthPlugin = require('puppeteer-extra-plugin-stealth');
puppeteer.use(StealthPlugin());
```

---

#### 10. æ™ºé€šè´¢ç» zhitong

**é—®é¢˜**: WAF æ‹¦æˆª

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// æ·»åŠ ä»£ç†
await page.setExtraHTTPHeaders({
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...',
    'Accept-Language': 'zh-CN,zh;q=0.9'
});

// ä½¿ç”¨ä»£ç†æœåŠ¡å™¨
const browser = await puppeteer.launch({
    args: ['--proxy-server=http://127.0.0.1:20171']
});
```

---

#### 11-13. å¾®ä¿¡/SeekingAlpha/è…¾è®¯

**é—®é¢˜**: éœ€ç™»å½•æˆ–ä¸¥æ ¼åçˆ¬

**ä¿®å¤æ–¹æ¡ˆ**: æš‚æ—¶æ’é™¤ï¼Œæˆ–æ·»åŠ  Cookie ç®¡ç†æ¨¡å—

---

### ç¬¬3ç±»ï¼šåŠ¨æ€åŠ è½½ï¼ˆ4ä¸ªï¼‰

#### 14. åå°”è¡—è§é—» wallstreet

**é—®é¢˜**: SPA åº”ç”¨ï¼ŒDOM å»¶è¿ŸåŠ è½½

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// å¢åŠ ç­‰å¾…æ—¶é—´
await puppeteer.randomDelay(5000, 6000);

// è§¦å‘æ»šåŠ¨åŠ è½½
await page.evaluate(() => window.scrollTo(0, 500));
await puppeteer.randomDelay(2000, 3000);

// ä½¿ç”¨APIæ›¿ä»£
const url = `https://wallstreetcn.com/search/wscn?query=äº¬ä¸œ`;
```

---

#### 15. é‡‘åæ•°æ® jin10

**é—®é¢˜**: WebSocket æ¨é€ï¼Œéä¼ ç»Ÿé¡µé¢

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// ä½¿ç”¨é‡‘åAPI
const url = `https://flash-api.jin10.com/v1/flash?keyword=äº¬ä¸œ`;

// æˆ–ç›‘å¬WebSocket
page.on('response', async response => {
    if (response.url().includes('flash')) {
        const data = await response.json();
        // å¤„ç†æ•°æ®
    }
});
```

---

#### 16. è´¢è”ç¤¾ cls

**é—®é¢˜**: APIå¤±æ•ˆ

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// æ›´æ–°APIåœ°å€
const url = `https://www.cls.cn/api/search?keyword=äº¬ä¸œ&page=1&type=article`;

// æ·»åŠ å¿…è¦headers
const response = await axios.get(url, {
    headers: {
        'Referer': 'https://www.cls.cn/',
        'User-Agent': '...'
    }
});
```

---

### ç¬¬4ç±»ï¼šå¸‚åœºä¸åŒ¹é…ï¼ˆ3ä¸ªï¼‰

#### 17-19. æ·˜è‚¡å§/å·¨æ½®èµ„è®¯/ä¸œè´¢è‚¡å§

**é—®é¢˜**: ä»…æ”¯æŒ A è‚¡

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// åœ¨å‡½æ•°å¼€å¤´æ·»åŠ å¸‚åœºåˆ¤æ–­
if (stockCode.match(/^\d{5}$/)) {
    console.log(`[${sourceName}] ${stockCode} æ˜¯æ¸¯è‚¡ï¼Œè·³è¿‡`);
    return [];
}
```

---

### ç¬¬5ç±»ï¼šç½‘ç»œé—®é¢˜ï¼ˆ2ä¸ªï¼‰

#### 20. æ¯ç»æ–°é—» nbd

**é—®é¢˜**: é‡å®šå‘å¾ªç¯

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// æ¸…ç†cookies
await page.deleteCookie();

// ä½¿ç”¨é¦–é¡µè€Œéæœç´¢é¡µ
const url = `https://www.nbd.com.cn/columns/319`;
```

---

## ä¸‰ã€ä¿®å¤ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | æº | é¢„è®¡å·¥ä½œé‡ |
|--------|-----|-----------|
| ğŸ”´ é«˜ | ä¸œæ–¹è´¢å¯Œã€æ ¼éš†æ±‡ã€å¯Œé€” | å„15åˆ†é’Ÿ |
| ğŸŸ¡ ä¸­ | ç ”æŠ¥å®¢ã€ç•Œé¢ã€å‘ç°æŠ¥å‘Š | å„20åˆ†é’Ÿ |
| ğŸŸ¢ ä½ | åçˆ¬ç±»ï¼ˆéœ€é¢å¤–æ¨¡å—ï¼‰| å„30åˆ†é’Ÿ |

---

## å››ã€å¿«é€ŸéªŒè¯è„šæœ¬

```bash
# æµ‹è¯•å•ä¸ªæº
node -e "
const { scrapeEastmoneyForStock } = require('./services/stockNewsCollector');
const puppeteer = require('./utils/puppeteerBase');

async function test() {
    const result = await scrapeEastmoneyForStock('09618', 'äº¬ä¸œé›†å›¢');
    console.log('ç»“æœ:', result.length, 'æ¡');
    result.forEach(r => console.log('-', r.title?.substring(0,40)));
    await puppeteer.closeBrowser();
}
test();
"
```

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2025-12-30*
