# MyWind ä»£ç ä¼˜åŒ–ä¸åŠŸèƒ½å¢è¡¥å»ºè®®æŠ¥å‘Š

**åˆ†ææ—¥æœŸ**: 2026-01-03
**ç›®çš„**: è¯†åˆ«å†—ä½™ä»£ç ï¼Œå»ºè®®éœ€è¦å¢åŠ çš„åŠŸèƒ½

---

## ä¸€ã€å†—ä½™æ–‡ä»¶åˆ†æ

### 1.1 ä¸´æ—¶æµ‹è¯•è„šæœ¬ (å¯åˆ é™¤)

**æ ¹ç›®å½•ä¸‹29ä¸ªtest-*.jsæ–‡ä»¶**ï¼š
```
test-all-scrapers.js      test-ths-api.js
test-cls.js               test-ths-ocr-improved.js
test-finance-integration.js   test-ths-pdf-download.js
test-full-scrapers.js     test-ths-puppeteer.js
test-hkej.js              test-ths-screenshot-ocr.js
test-hket.js              test-ths-stock-info.js
test-hkex-annual-report.js    test-timeout-scrapers.js
test-jiemian.js           test-wallstreet.js
test-jin10.js             test-ths-12pages.js
test-nbd.js               ...å…±29ä¸ª
```

**å»ºè®®**: 
- âŒ åˆ é™¤æˆ–ç§»åŠ¨åˆ° `tests/scripts/` ç›®å½•
- âœ… ä¿ç•™æœ‰ä»·å€¼çš„æµ‹è¯•åˆ°æ­£å¼æµ‹è¯•æ¡†æ¶

---

### 1.2 ä¸´æ—¶åˆ†æè„šæœ¬ (å¯åˆ é™¤)

**17ä¸ªanalyze-*.jsæ–‡ä»¶**ï¼š
```
analyze-cls.js           analyze-ths-deep.js
analyze-hkej.js          analyze-ths-dom.js
analyze-hket.js          analyze-wallstreet.js
analyze-hkex-*.js (4ä¸ª)  analyze-sites.js
...å…±17ä¸ª
```

**å»ºè®®**: âŒ å…¨éƒ¨åˆ é™¤ï¼ˆå·²å®Œæˆåˆ†æä»»åŠ¡ï¼‰

---

### 1.3 æµ‹è¯•ç»“æœJSON (å¯åˆ é™¤)

**14ä¸ª*-test*.jsonæ–‡ä»¶**ï¼š
```
all-sources-test-result.json
batch1-test.json ~ batch7-test.json
e2e-test-result.json
full-e2e-test-result.json
...å…±14ä¸ª
```

**å»ºè®®**: âŒ å…¨éƒ¨åˆ é™¤ï¼ˆä¸´æ—¶è¾“å‡ºæ–‡ä»¶ï¼‰

---

### 1.4 æˆªå›¾æ–‡ä»¶ (å¯åˆ é™¤)

**22ä¸ªPNGæˆªå›¾æ–‡ä»¶**ï¼š
```
hkex-*.png (6ä¸ª)
ths-HK*.png (16ä¸ª)
```

**å»ºè®®**: 
- âŒ ç§»åŠ¨åˆ° `docs/screenshots/` æˆ–åˆ é™¤
- ä¿ç•™æœ‰æ–‡æ¡£ä»·å€¼çš„æˆªå›¾

---

### 1.5 æŠ¥å‘Šæ–‡æ¡£ (éœ€æ•´ç†)

**26ä¸ª*æŠ¥å‘Š*.mdæ–‡ä»¶**ï¼š

| ä¿ç•™ | æ–‡ä»¶ | ç†ç”± |
|------|------|------|
| âœ… | MyWindé¡¹ç›®å…¨é¢åˆ†ææŠ¥å‘Š.md | é¡¹ç›®æ–‡æ¡£ |
| âœ… | APIæ¥å£æ–‡æ¡£æŠ¥å‘Š.md | æ¥å£æ–‡æ¡£ |
| âœ… | è‚¡ç¥¨è®¢é˜…ä¸æŠ•ç ”ç³»ç»Ÿè®¾è®¡æŠ¥å‘Š.md | è®¾è®¡æ–‡æ¡£ |
| âš ï¸ | å…¶ä»–23ä¸ªæŠ¥å‘Š | æ•´åˆæˆ–åˆ é™¤ |

**å»ºè®®**: 
- æ•´åˆç›¸å…³æŠ¥å‘Šä¸ºå®Œæ•´æ–‡æ¡£
- åˆ é™¤è¿‡æ—¶æˆ–é‡å¤çš„æŠ¥å‘Š

---

### 1.6 åçœä¹¦ (å¯å½’æ¡£)

**18ä¸ªåçœä¹¦_*.mdæ–‡ä»¶**

**å»ºè®®**: 
- ğŸ“ ç§»åŠ¨åˆ° `docs/retrospectives/` ç›®å½•
- æˆ–åˆå¹¶ä¸ºå•ä¸€çš„ç»éªŒæ•™è®­æ–‡æ¡£

---

## äºŒã€å†—ä½™ä»£ç åˆ†æ

### 2.1 servicesç›®å½•é‡å¤åŠŸèƒ½

| æ–‡ä»¶ | é—®é¢˜ | å»ºè®® |
|------|------|------|
| `scraperService.js` (22KB) | ä¸ `stockNewsCollector.js` åŠŸèƒ½é‡å  | åˆå¹¶æˆ–æ˜ç¡®åˆ†å·¥ |
| `browserService.js` | ä¸ `puppeteerBase.js` åŠŸèƒ½é‡å  | åˆå¹¶åˆ°utils |
| `hkSchedulerService.js` | ä¸ `schedulerService.js` é‡å¤ | åˆå¹¶ä¸ºç»Ÿä¸€è°ƒåº¦ |
| `smartSchedulerService.js` | ä¸ `schedulerService.js` é‡å¤ | åŒä¸Š |

### 2.2 utilsç›®å½•é‡å¤åŠŸèƒ½

| æ–‡ä»¶ | é—®é¢˜ | å»ºè®® |
|------|------|------|
| `pdfExtractor.js` | |
| `pdfOcrExtractor.js` | 4ä¸ªPDFå¤„ç†æ–‡ä»¶ | åˆå¹¶ä¸ºå•ä¸€æ¨¡å— |
| `pdfRenderer.js` | |
| `pdfTableExtractor.js` | |
| `browserPool.js` | ä¸ `puppeteerBase.js` éƒ¨åˆ†é‡å  | ä¿æŒåˆ†ç¦»ä½†æ˜ç¡®èŒè´£ |
| `browserUtils.js` | |

### 2.3 stockNewsCollector.js è¿‡å¤§

**é—®é¢˜**: 2519è¡Œï¼Œ51ä¸ªé‡‡é›†å‡½æ•°ï¼Œå•æ–‡ä»¶è¿‡å¤§

**å»ºè®®**:
```
services/
â”œâ”€â”€ collectors/
â”‚   â”œâ”€â”€ baseCollector.js      # åŸºç±»
â”‚   â”œâ”€â”€ hkStockCollector.js   # æ¸¯è‚¡é‡‡é›†
â”‚   â”œâ”€â”€ aStockCollector.js    # Aè‚¡é‡‡é›†
â”‚   â”œâ”€â”€ usStockCollector.js   # ç¾è‚¡é‡‡é›†
â”‚   â””â”€â”€ socialCollector.js    # ç¤¾äº¤åª’ä½“é‡‡é›†
â””â”€â”€ stockNewsCollector.js     # ç»Ÿä¸€å…¥å£
```

---

## ä¸‰ã€éœ€è¦å¢åŠ çš„åŠŸèƒ½

### 3.1 é«˜ä¼˜å…ˆçº§

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| **å®šæ—¶å…¬å‘Šé‡‡é›†** | æ¯æ—¥è‡ªåŠ¨é‡‡é›†ä¸šç»©å…¬å‘Š | å¾…å®ç° |
| **ç ”æŠ¥PDFä¸‹è½½** | ä¸‹è½½ç ”æŠ¥PDFæ–‡ä»¶ | å¾…å®ç° |
| **è´¢åŠ¡æ•°æ®æå–** | ä»PDFæå–å…³é”®è´¢åŠ¡æŒ‡æ ‡ | å¾…å®ç° |
| **AIå…¬å‘Šåˆ†æ** | è‡ªåŠ¨åˆ†æå…¬å‘Šå†…å®¹ç”Ÿæˆæ‘˜è¦ | å¾…å®ç° |

### 3.2 ä¸­ä¼˜å…ˆçº§

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| **ç»Ÿä¸€é”™è¯¯å¤„ç†** | å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶ | ç¼ºå¤± |
| **APIé‰´æƒ** | JWTæˆ–API Keyè®¤è¯ | éƒ¨åˆ†å®ç° |
| **è¯·æ±‚é™æµ** | é˜²æ­¢çˆ¬è™«è¢«å°ç¦ | ç¼ºå¤± |
| **å¥åº·æ£€æŸ¥å¢å¼º** | æ•°æ®åº“ã€çˆ¬è™«çŠ¶æ€ç›‘æ§ | éƒ¨åˆ†å®ç° |
| **æ—¥å¿—èšåˆ** | ç»Ÿä¸€æ—¥å¿—æ ¼å¼å’Œå­˜å‚¨ | éƒ¨åˆ†å®ç° |

### 3.3 ä½ä¼˜å…ˆçº§

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| **å‰ç«¯ä»ªè¡¨ç›˜** | æ•°æ®å¯è§†åŒ–ç•Œé¢ | éƒ¨åˆ†å®ç° |
| **å¤šç”¨æˆ·æ”¯æŒ** | ç”¨æˆ·éš”ç¦»çš„è®¢é˜…ç®¡ç† | ç¼ºå¤± |
| **æ•°æ®å¯¼å‡º** | å¯¼å‡ºä¸ºExcel/CSV | ç¼ºå¤± |
| **Webhooké€šçŸ¥** | è‡ªå®šä¹‰Webhookæ¨é€ | ç¼ºå¤± |

---

## å››ã€é¡¹ç›®æ¸…ç†å»ºè®®

### 4.1 å¯åˆ é™¤çš„æ–‡ä»¶ (çº¦100ä¸ª)

```bash
# ä¸´æ—¶æµ‹è¯•è„šæœ¬ (29ä¸ª)
rm -f test-*.js

# ä¸´æ—¶åˆ†æè„šæœ¬ (17ä¸ª)
rm -f analyze-*.js

# æµ‹è¯•ç»“æœJSON (14ä¸ª)
rm -f *-test*.json

# ä¸´æ—¶æˆªå›¾ (22ä¸ª)
rm -f *.png

# å…¶ä»–ä¸´æ—¶æ–‡ä»¶
rm -f debug-*.js probe_*.js fix-scrapers.js
rm -f full-targeted-test-output.txt test-output.txt
rm -f easyocr_install.log ths-ocr-output.log
```

### 4.2 å»ºè®®å½’æ¡£çš„æ–‡ä»¶

```
docs/
â”œâ”€â”€ reports/             # æŠ¥å‘Šæ–‡æ¡£
â”œâ”€â”€ retrospectives/      # åçœä¹¦
â”œâ”€â”€ screenshots/         # æœ‰ä»·å€¼çš„æˆªå›¾
â””â”€â”€ design/              # è®¾è®¡æ–‡æ¡£
```

### 4.3 æ¸…ç†åçš„é¡¹ç›®ç»“æ„

```
/anti/mywind/
â”œâ”€â”€ server.js
â”œâ”€â”€ package.json
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ README.md
â”œâ”€â”€ models/          (8ä¸ª)
â”œâ”€â”€ routes/          (13ä¸ª)
â”œâ”€â”€ services/        (27+32ä¸ª)
â”œâ”€â”€ utils/           (20ä¸ª)
â”œâ”€â”€ frontend/
â”œâ”€â”€ config/
â”œâ”€â”€ data/
â”œâ”€â”€ tests/           # æ­£å¼æµ‹è¯•
â””â”€â”€ docs/            # æ–‡æ¡£å½’æ¡£
```

---

## äº”ã€æ¸…ç†æ”¶ç›Šä¼°ç®—

| ç±»åˆ« | å½“å‰ | æ¸…ç†å | å‡å°‘ |
|------|------|--------|------|
| æ ¹ç›®å½•æ–‡ä»¶ | 197 | ~60 | 70% |
| ç£ç›˜å ç”¨ | å¤§ | å° | æ˜¾è‘— |
| ä»£ç å¯ç»´æŠ¤æ€§ | ä½ | é«˜ | - |

---

## å…­ã€æ‰§è¡Œè®¡åˆ’

### ç¬¬ä¸€æ­¥: å¤‡ä»½ (5åˆ†é’Ÿ)
```bash
tar -czvf mywind-backup-$(date +%Y%m%d).tar.gz /anti/mywind
```

### ç¬¬äºŒæ­¥: ç§»åŠ¨æŠ¥å‘Šå’Œåçœä¹¦ (10åˆ†é’Ÿ)
```bash
mkdir -p docs/{reports,retrospectives}
mv *æŠ¥å‘Š*.md docs/reports/
mv åçœä¹¦*.md docs/retrospectives/
```

### ç¬¬ä¸‰æ­¥: åˆ é™¤ä¸´æ—¶æ–‡ä»¶ (5åˆ†é’Ÿ)
```bash
rm -f test-*.js analyze-*.js *-test*.json *.png debug-*.js
```

### ç¬¬å››æ­¥: æ•´ç†services (2å°æ—¶)
- æ‹†åˆ†stockNewsCollector.js
- åˆå¹¶é‡å¤çš„scheduleræœåŠ¡
- åˆå¹¶PDFå¤„ç†æ¨¡å—

---

## ä¸ƒã€æ€»ç»“

### å¯åˆ é™¤çš„å†—ä½™æ–‡ä»¶
| ç±»åˆ« | æ•°é‡ | å ç”¨ |
|------|------|------|
| æµ‹è¯•è„šæœ¬ | 29 | ~150KB |
| åˆ†æè„šæœ¬ | 17 | ~70KB |
| JSONç»“æœ | 14 | ~300KB |
| PNGæˆªå›¾ | 22 | ~5MB |
| **åˆè®¡** | **82** | **~5.5MB** |

### éœ€è¦å¢åŠ çš„æ ¸å¿ƒåŠŸèƒ½
1. å®šæ—¶å…¬å‘Šé‡‡é›†
2. ç ”æŠ¥PDFä¸‹è½½
3. AIå…¬å‘Šåˆ†æ
4. ç»Ÿä¸€é”™è¯¯å¤„ç†
5. è¯·æ±‚é™æµ
