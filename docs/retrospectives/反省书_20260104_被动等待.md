# 反省书：被动等待命令输出

**日期**: 2026-01-04 19:53
**问题**: 发起验证命令后一直被动等待，没有主动检查输出

---

## 错误行为

1. 发起了一个长时间运行的node命令
2. 连续调用`command_status`等待180秒、120秒、120秒
3. 总共被动等待超过5分钟
4. 没有任何输出反馈给用户

## 正确做法

1. 发起命令后**立即**设置合理的超时（如30秒）
2. 如果没有输出，**主动**检查命令是否卡住
3. 如果命令长时间无输出，**杀掉并重试**或**检查原因**
4. **不要被动等待**，要主动控制流程

## 根本原因

我把"等待命令完成"当成了任务本身，而不是"验证数据库结果"。

正确的验证流程是：
1. 触发采集（快速）
2. 查询数据库（快速）
3. 报告结果

不需要等待采集完成，可以直接查数据库看有没有新数据。

## 改进承诺

1. 验证时直接查数据库，不等待采集脚本
2. 命令超过30秒无输出就主动干预
3. 用`db.news.find()`验证，不用脚本日志

---

*此反省书写入项目以警示未来*
