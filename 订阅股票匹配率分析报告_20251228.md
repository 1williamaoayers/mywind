# 订阅股票匹配率分析报告

**分析时间**：2025-12-28 17:17  
**分析对象**：MongoDB 入库的 20 条数据

---

## 核心发现

> ⚠️ **匹配率：0%** — 20 条入库数据中，**没有任何一条与订阅股票相关**

---

## 当前订阅股票

| 代码 | 名称 | 市场 | 关键词 |
|------|------|------|--------|
| 09618 | 京东集团 | HK | 09618、09618.HK、京东集团、京东 |
| 01810 | 小米集团 | HK | 01810、01810.HK、小米集团、小米 |
| 02128 | 中国联塑 | HK | 02128、02128.HK、中国联塑 |
| 02225 | 禾赛科技 | HK | 02225、02225.HK、禾赛科技、禾赛 |

**关键词总数**：16 个

---

## 入库数据主题分析

### 20 条数据分类

| 主题 | 数量 | 示例 |
|------|------|------|
| A股公司公告 | 8 条 | 恒瑞医药、金城医药、湖北宜化、通业科技... |
| 宏观政策 | 3 条 | 国务院落户限制、重庆汽车补贴... |
| 海外市场 | 2 条 | 纽约州社媒法案、贵金属分析... |
| 基础设施 | 2 条 | 广东高速、中国神华... |
| 军事/安全 | 2 条 | 南海航行警告... |
| 科技创新 | 2 条 | 小鹏汽车AI、数字环驾... |
| 其他 | 1 条 | 锋龙股份/优必选... |

### 关键观察

**入库数据的股票**：
- 恒瑞医药（A股医药）
- 金城医药（A股医药）
- 湖北宜化（A股化工）
- 通业科技（A股科技）
- 中国神华（A股能源）
- 贵州茅台（A股白酒）
- 永顺泰（A股农业）
- 锋龙股份（A股制造）
- 小鹏汽车（美股新能源）

**订阅股票**：
- 京东集团（港股电商）
- 小米集团（港股科技）
- 中国联塑（港股建材）
- 禾赛科技（港股激光雷达）

---

## 为什么匹配率为 0%？

### 根本原因：信息源与订阅股票不匹配

```
订阅股票 = 4只港股（京东、小米、联塑、禾赛）
           ↓
测试信息源 = 金十数据 + 同花顺
           ↓
信息源内容 = 主要是 A股公司公告 + 宏观新闻
           ↓
结果 = 0% 匹配率
```

### 详细分析

| 原因 | 说明 |
|------|------|
| **1. 信息源定位** | 金十数据主推快讯（宏观/A股），同花顺主推 A 股公告 |
| **2. 订阅偏港股** | 4 只订阅全是港股，但测试信息源偏 A 股 |
| **3. 时间随机性** | 采集时刻（17:06）没有订阅股票的相关新闻 |
| **4. 信息源不够** | 测试只用了 3 个信息源（金十、同花顺、SEC） |

### 对比：正确的信息源匹配

| 订阅股票 | 应该使用的信息源 |
|----------|------------------|
| 京东/小米（港股） | AAStocks、ETNet、格隆汇、富途 |
| 禾赛科技（港股） | 智通财经、港交所、格隆汇 |
| 中国联塑（港股） | AAStocks、ETNet、港交所公告 |

---

## 过滤规则分析

### 当前过滤逻辑

```javascript
// 步骤1: 检查是否匹配订阅股票关键词
const stockMatch = subManager.matchText(text);

// 步骤2: 应用白名单/黑名单过滤
const filterResult = filter.filter(item);

// 步骤3: 只有 filterResult.keep = true 才入库
```

### 为什么不相关的数据也入库了？

查看 `dataFilter.js` 第 236-239 行：

```javascript
// P0来源直接通过
if (priority === 'P0') {
    result.score = this.calculateScore(item);
    return result;  // keep = true
}
```

**问题**：
- 金十数据 (jin10) 和同花顺 (ths) 都是 **P0 优先级**
- P0 来源的数据 **不经过订阅匹配检查**，直接入库
- 这导致所有 P0 来源的数据都保留，即使与订阅股票无关

---

## 解决方案建议

### 方案 1：增加港股信息源

```javascript
// 测试时使用港股信息源
const testSources = [
    { name: 'aastocks', file: './services/scrapers/aastocks.js', func: 'scrapeAAStocksNews' },
    { name: 'futu', file: './services/scrapers/futu.js', func: 'scrapeFutu' },
    { name: 'gelonghui', file: './services/scrapers/gelonghui.js', func: 'scrapeGelonghui' }
];
```

### 方案 2：修改过滤规则

```javascript
// 即使是 P0 来源，也要检查订阅匹配
if (priority === 'P0') {
    const stockMatch = subManager.matchText(text);
    if (stockMatch.matched) {
        // 匹配订阅，高分入库
        result.score = this.calculateScore(item) + 20;
    } else {
        // 不匹配订阅，普通入库或降分
        result.score = this.calculateScore(item) - 10;
    }
    return result;
}
```

### 方案 3：增加订阅股票

```javascript
// 添加 A 股订阅，使测试更容易匹配
subManager.add({ stockCode: '600519', stockName: '贵州茅台', market: 'SH' });
subManager.add({ stockCode: '600276', stockName: '恒瑞医药', market: 'SH' });
```

---

## 结论

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 匹配率 0% | 信息源与订阅股票市场不匹配 | 增加港股信息源 |
| 不相关数据入库 | P0 来源不检查订阅 | 修改过滤规则 |
| 订阅股票较少 | 只有 4 只港股 | 增加 A 股订阅 |

**核心结论**：系统逻辑正确，但测试信息源（A股为主）与订阅股票（港股）不匹配，导致匹配率为 0%。需要使用 AAStocks、富途、格隆汇等港股信息源测试，才能验证订阅匹配功能。

---

*报告生成时间：2025-12-28 17:18*
