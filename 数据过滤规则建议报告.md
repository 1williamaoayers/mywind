# MyWind æ•°æ®é‡‡é›†è¿‡æ»¤è§„åˆ™å»ºè®®æŠ¥å‘Š

**æŠ¥å‘Šæ—¥æœŸ**: 2025-12-28  
**æŠ¥å‘Šç›®çš„**: è®¾è®¡åˆç†çš„æ•°æ®è¿‡æ»¤è§„åˆ™ï¼Œé¿å…æ•°æ®åº“æ— åºè†¨èƒ€

---

## ğŸ“Š é—®é¢˜åˆ†æ

### å½“å‰çŠ¶å†µ
- 25ä¸ªæ•°æ®æºæ­£å¸¸è¿è¡Œ
- æ¯ä¸ªæºæ¯æ¬¡é‡‡é›†çº¦3-30æ¡
- å¦‚æœæ¯å°æ—¶é‡‡é›†ï¼Œæ¯å¤©å¯äº§ç”Ÿ **æ•°åƒæ¡** æ•°æ®
- é•¿æœŸç§¯ç´¯å°†å¯¼è‡´æ•°æ®åº“è†¨èƒ€

### æ ¸å¿ƒé—®é¢˜
1. **æ— ç”¨æ•°æ®è¿‡å¤š** - å¾ˆå¤šæ–°é—»ä¸æŠ•èµ„å†³ç­–æ— å…³
2. **é‡å¤é‡‡é›†** - åŒä¸€æ–°é—»è¢«å¤šæ¬¡é‡‡é›†
3. **å­˜å‚¨æˆæœ¬** - å†å²æ•°æ®ä»·å€¼é€’å‡ä½†å ç”¨ç©ºé—´
4. **æŸ¥è¯¢æ•ˆç‡** - æ•°æ®é‡å¤§å¯¼è‡´æŸ¥è¯¢å˜æ…¢

---

## ğŸ’¡ è¿‡æ»¤è§„åˆ™è®¾è®¡

### ç¬¬ä¸€å±‚ï¼šå…³é”®è¯è¿‡æ»¤

#### A. å¿…é¡»åŒ…å«ï¼ˆç™½åå•ï¼‰
```javascript
const MUST_INCLUDE = {
    // Aè‚¡ç›¸å…³
    aStock: ['Aè‚¡', 'æ²ªæ·±', 'ä¸Šè¯', 'æ·±è¯', 'åˆ›ä¸šæ¿', 'ç§‘åˆ›æ¿', 'åŒ—äº¤æ‰€'],
    // æ¸¯è‚¡ç›¸å…³
    hkStock: ['æ¸¯è‚¡', 'æ’ç”Ÿ', 'æ¸¯äº¤æ‰€', 'æ¸¯è‚¡é€š', 'åŒ—æ°´', 'å—æ°´'],
    // ç¾è‚¡ç›¸å…³
    usStock: ['ç¾è‚¡', 'çº³æ–¯è¾¾å…‹', 'æ ‡æ™®', 'é“ç¼æ–¯', 'ä¸­æ¦‚è‚¡'],
    // å®è§‚ç»æµ
    macro: ['å¤®è¡Œ', 'GDP', 'CPI', 'PMI', 'åˆ©ç‡', 'é™æ¯', 'åŠ æ¯', 'è´§å¸æ”¿ç­–'],
    // è¡Œä¸šçƒ­ç‚¹
    sector: ['æ–°èƒ½æº', 'èŠ¯ç‰‡', 'åŠå¯¼ä½“', 'AI', 'äººå·¥æ™ºèƒ½', 'æœºå™¨äºº', 'åŒ»è¯'],
    // å…¬å¸å…¬å‘Š
    company: ['ä¸šç»©', 'è´¢æŠ¥', 'åˆ†çº¢', 'å¢æŒ', 'å‡æŒ', 'å›è´­', 'å¹¶è´­']
};
```

#### B. å¿…é¡»æ’é™¤ï¼ˆé»‘åå•ï¼‰
```javascript
const MUST_EXCLUDE = [
    // æ— å…³å†…å®¹
    'å¨±ä¹', 'æ˜æ˜Ÿ', 'å…«å¦', 'ç»¼è‰º', 'æ¸¸æˆ',
    // å¹¿å‘Šå†…å®¹
    'é™æ—¶ä¼˜æƒ ', 'ç«‹å³è´­ä¹°', 'ç‚¹å‡»é¢†å–', 'APPä¸‹è½½',
    // ä½è´¨é‡å†…å®¹
    'éœ‡æƒŠ', 'é€Ÿçœ‹', 'è½¬å‘', 'ç‚¹èµ'
];
```

---

### ç¬¬äºŒå±‚ï¼šæ—¶é—´è¿‡æ»¤

| æ•°æ®ç±»å‹ | é‡‡é›†é¢‘ç‡ | ä¿ç•™æ—¶é•¿ |
|----------|----------|----------|
| å¿«è®¯/å®æ—¶ | æ¯15åˆ†é’Ÿ | 7å¤© |
| æ–°é—»/èµ„è®¯ | æ¯å°æ—¶ | 30å¤© |
| ç ”æŠ¥/æ·±åº¦ | æ¯6å°æ—¶ | 90å¤© |
| å…¬å‘Š/æŠ«éœ² | æ¯12å°æ—¶ | 365å¤© |
| èµ„é‡‘æµå‘ | æ¯30åˆ†é’Ÿ | 30å¤© |

---

### ç¬¬ä¸‰å±‚ï¼šæ¥æºä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | æ¥æº | é‡‡é›†ç­–ç•¥ |
|--------|------|----------|
| **P0 æ ¸å¿ƒ** | é‡‘åã€åŒèŠ±é¡ºã€æ¸¯è‚¡é€š | å…¨é‡é‡‡é›† |
| **P1 é‡è¦** | ç¬¬ä¸€è´¢ç»ã€è¯åˆ¸æ—¶æŠ¥ã€å¯Œé€” | å…³é”®è¯è¿‡æ»¤ |
| **P2 è¡¥å……** | æ ¼éš†æ±‡ã€ç•Œé¢ã€36æ°ª | ä¸¥æ ¼è¿‡æ»¤ |
| **P3 è¾…åŠ©** | å¾®åšã€å¾®ä¿¡ | ä»…çƒ­æœ/ç²¾é€‰ |

---

### ç¬¬å››å±‚ï¼šå»é‡ç­–ç•¥

```javascript
const DEDUP_RULES = {
    // æ ‡é¢˜ç›¸ä¼¼åº¦é˜ˆå€¼
    titleSimilarity: 0.85,
    
    // å»é‡æ—¶é—´çª—å£
    dedupeWindow: 24 * 60 * 60 * 1000, // 24å°æ—¶
    
    // ç”Ÿæˆå”¯ä¸€æ ‡è¯†
    generateHash: (item) => {
        // åŸºäºæ ‡é¢˜+æ¥æº+æ—¥æœŸç”Ÿæˆhash
        const key = `${item.title}-${item.source}-${item.date.toDateString()}`;
        return md5(key);
    }
};
```

---

### ç¬¬äº”å±‚ï¼šæ•°æ®ç”Ÿå‘½å‘¨æœŸ

```
é‡‡é›† â†’ è¿‡æ»¤ â†’ å­˜å‚¨ â†’ å½’æ¡£ â†’ æ¸…ç†
  â”‚       â”‚      â”‚      â”‚      â”‚
  â”‚       â”‚      â”‚      â”‚      â””â”€ è¶…è¿‡365å¤©è‡ªåŠ¨åˆ é™¤
  â”‚       â”‚      â”‚      â””â”€ è¶…è¿‡90å¤©ç§»åˆ°å†·å­˜å‚¨
  â”‚       â”‚      â””â”€ çƒ­æ•°æ®å­˜MongoDB
  â”‚       â””â”€ åº”ç”¨è¿‡æ»¤è§„åˆ™
  â””â”€ ä»æ•°æ®æºé‡‡é›†
```

---

## ğŸ› ï¸ å®ç°å»ºè®®

### 1. è¿‡æ»¤æ¨¡å—è®¾è®¡

```javascript
// utils/dataFilter.js

class DataFilter {
    constructor(config) {
        this.whitelist = config.whitelist;
        this.blacklist = config.blacklist;
        this.priority = config.priority;
    }
    
    // æ£€æŸ¥æ˜¯å¦åº”è¯¥ä¿ç•™
    shouldKeep(item) {
        // é»‘åå•æ£€æŸ¥
        if (this.matchBlacklist(item.title)) {
            return { keep: false, reason: 'blacklist' };
        }
        
        // ç™½åå•æ£€æŸ¥
        if (!this.matchWhitelist(item.title)) {
            return { keep: false, reason: 'not_relevant' };
        }
        
        // ä¼˜å…ˆçº§æ£€æŸ¥
        if (this.priority[item.source] === 'P3') {
            // ä½ä¼˜å…ˆçº§æ¥æºéœ€è¦æ›´ä¸¥æ ¼è¿‡æ»¤
            if (!this.isHighValue(item)) {
                return { keep: false, reason: 'low_priority' };
            }
        }
        
        return { keep: true };
    }
}
```

### 2. æ•°æ®æ¸…ç†ä»»åŠ¡

```javascript
// scripts/dataCleanup.js

async function cleanupOldData() {
    const now = new Date();
    
    // åˆ é™¤7å¤©å‰çš„å¿«è®¯
    await db.news.deleteMany({
        type: 'flash',
        createdAt: { $lt: new Date(now - 7 * 24 * 60 * 60 * 1000) }
    });
    
    // åˆ é™¤30å¤©å‰çš„æ–°é—»
    await db.news.deleteMany({
        type: 'news',
        createdAt: { $lt: new Date(now - 30 * 24 * 60 * 60 * 1000) }
    });
    
    // å½’æ¡£90å¤©å‰çš„ç ”æŠ¥
    await archiveOldReports();
}
```

### 3. å­˜å‚¨ä¼˜åŒ–

| ç­–ç•¥ | è¯´æ˜ |
|------|------|
| ç´¢å¼•ä¼˜åŒ– | å¯¹å¸¸ç”¨æŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼• |
| åˆ†è¡¨å­˜å‚¨ | æŒ‰æ—¥æœŸåˆ†è¡¨ |
| å‹ç¼©å­˜å‚¨ | å¯¹å†å²æ•°æ®å¯ç”¨å‹ç¼© |
| å†·çƒ­åˆ†ç¦» | çƒ­æ•°æ®SSDï¼Œå†·æ•°æ®HDD |

---

## ğŸ“‹ æ¨èé…ç½®

### å¿«è®¯ç±»ï¼ˆé‡‘åã€åŒèŠ±é¡ºï¼‰
```yaml
é‡‡é›†é¢‘ç‡: 15åˆ†é’Ÿ
æ¯æ¬¡æ•°é‡: 20æ¡
è¿‡æ»¤è§„åˆ™: ä»…ç™½åå•å…³é”®è¯
ä¿ç•™æ—¶é•¿: 7å¤©
```

### æ–°é—»ç±»ï¼ˆç¬¬ä¸€è´¢ç»ã€è¯åˆ¸æ—¶æŠ¥ï¼‰
```yaml
é‡‡é›†é¢‘ç‡: 1å°æ—¶
æ¯æ¬¡æ•°é‡: 10æ¡
è¿‡æ»¤è§„åˆ™: ç™½åå• + é»‘åå•
ä¿ç•™æ—¶é•¿: 30å¤©
```

### ç ”æŠ¥ç±»ï¼ˆä¸œè´¢ã€ç ”æŠ¥å®¢ï¼‰
```yaml
é‡‡é›†é¢‘ç‡: 6å°æ—¶
æ¯æ¬¡æ•°é‡: 5æ¡
è¿‡æ»¤è§„åˆ™: ä»…æŠ•èµ„ç›¸å…³
ä¿ç•™æ—¶é•¿: 90å¤©
```

### çƒ­æœç±»ï¼ˆå¾®åšï¼‰
```yaml
é‡‡é›†é¢‘ç‡: 30åˆ†é’Ÿ
æ¯æ¬¡æ•°é‡: 5æ¡ï¼ˆå‰5çƒ­æœï¼‰
è¿‡æ»¤è§„åˆ™: è´¢ç»ç›¸å…³
ä¿ç•™æ—¶é•¿: 3å¤©
```

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

| æŒ‡æ ‡ | æ— è¿‡æ»¤ | æœ‰è¿‡æ»¤ | èŠ‚çœ |
|------|--------|--------|------|
| æ—¥æ–°å¢æ•°æ® | ~5000æ¡ | ~500æ¡ | **90%** |
| æœˆå­˜å‚¨å¢é•¿ | ~50MB | ~5MB | **90%** |
| æŸ¥è¯¢å“åº” | 500ms | 50ms | **90%** |

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **åˆ›å»ºè¿‡æ»¤æ¨¡å—** `utils/dataFilter.js`
2. **æ·»åŠ å»é‡é€»è¾‘** åˆ°æ¯ä¸ªçˆ¬è™«
3. **åˆ›å»ºæ¸…ç†ä»»åŠ¡** `scripts/dataCleanup.js`
4. **é…ç½®å®šæ—¶ä»»åŠ¡** è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2025-12-28 10:25*
